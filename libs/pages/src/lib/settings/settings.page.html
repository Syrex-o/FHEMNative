<div class="auto-container">
    <h2 class="size-b-app color-a-app">{{'PAGES.SETTINGS.HEAD' | translate}}</h2>

    <fhem-native-ui-category>
        <fhem-native-text-line name [wrap]="false"> {{'PAGES.SETTINGS.FHEM.HEAD' | translate}}</fhem-native-text-line>
        <div content>
            <!-- login -->
            <fhem-native-ui-box [clickable]="true" [routerLink]="['login']">
                <fhem-native-text-block class="w-100" [label]="'PAGES.SETTINGS.FHEM.SOCKET_SETTINGS.TEXT' | translate" [info]="'PAGES.SETTINGS.FHEM.SOCKET_SETTINGS.INFO' | translate"/>
                <ion-icon class="color-a-app size-b-app" name="lock-closed-outline"></ion-icon>
            </fhem-native-ui-box>

            <!-- room export -->
            <fhem-native-ui-box [clickable]="true" (click)="downloadConfig()">
                <fhem-native-text-block class="w-100" [label]="'PAGES.SETTINGS.FHEM.EXPORT.TEXT' | translate" [info]="'PAGES.SETTINGS.FHEM.EXPORT.INFO' | translate"/>
                <ion-icon class="color-a-app size-b-app" name="download-outline"></ion-icon>
            </fhem-native-ui-box>

            <!-- room import -->
            <fhem-native-ui-box [clickable]="true" class="mb-1-5" (click)="importConfig()">
                <fhem-native-text-block class="w-100" [label]="'PAGES.SETTINGS.FHEM.IMPORT.TEXT' | translate" [info]="'PAGES.SETTINGS.FHEM.IMPORT.INFO' | translate"/>
                <ion-icon class="color-a-app size-b-app rotated" name="download-outline"></ion-icon>
            </fhem-native-ui-box>
        </div>
    </fhem-native-ui-category>

    <fhem-native-ui-category *ngIf="primaryColor$ | async as primaryColor">
        <fhem-native-text-line name [wrap]="false"> {{'PAGES.SETTINGS.APP.HEAD' | translate}}</fhem-native-text-line>
        <div content>
            <!-- theme -->
            <fhem-native-select 
                [label]="'PAGES.SETTINGS.APP.THEME.TEXT' | translate" 
                [info]="'PAGES.SETTINGS.APP.THEME.INFO' | translate" 
                [items]="themeOptions" selectionType="action-sheet" 
                [(ngModel)]="settings.app.theme"
                (selectionChanged)="changeTheme($event.value)">
            </fhem-native-select>

            <!-- lang -->
            <fhem-native-select 
                [label]="'PAGES.SETTINGS.APP.LANG.TEXT' | translate" 
                [info]="'PAGES.SETTINGS.APP.LANG.INFO' | translate" 
                [items]="langOptions" selectionType="action-sheet" 
                [(ngModel)]="settings.app.language"
                (selectionChanged)="changeLang($event.value)">
            </fhem-native-select>

            <!-- allow editing -->
            <fhem-native-switch
                [boxed]="true"
                [showInfoBubble]="false"
                [backgroundColorOff]="primaryColor"
                [label]="'PAGES.SETTINGS.APP.EDITING.TEXT' | translate" 
                [info]="'PAGES.SETTINGS.APP.EDITING.INFO' | translate"
                [(ngModel)]="settings.app.allowEditing"
                (clicked)="changeAppSetting('allowEditing', $event)">
            </fhem-native-switch>

            <!-- toast messages -->
            <fhem-native-switch
                [boxed]="true"
                [showInfoBubble]="false"
                [backgroundColorOff]="primaryColor"
                [label]="'PAGES.SETTINGS.APP.TOAST.TEXT' | translate" 
                [info]="'PAGES.SETTINGS.APP.TOAST.INFO' | translate"
                [(ngModel)]="settings.app.allowToasts"
                (clicked)="changeAppSetting('allowToasts', $event)">
            </fhem-native-switch>

            <!-- log file -->
            <fhem-native-ui-box [clickable]="true" class="mb-1-5" (click)="downloadLog()">
                <fhem-native-text-block class="w-100" [label]="'PAGES.SETTINGS.APP.LOG.TEXT' | translate" [info]="'PAGES.SETTINGS.APP.LOG.INFO' | translate"></fhem-native-text-block>
                <ion-icon class="color-a-app size-b-app" name="download-outline"></ion-icon>
            </fhem-native-ui-box>
        </div>
    </fhem-native-ui-category>

    <fhem-native-ui-category>
        <fhem-native-text-line name [wrap]="false"> {{'PAGES.SETTINGS.SUPPORT.HEAD' | translate}}</fhem-native-text-line>
        <div content>
            <!-- support -->
            <!-- <fhem-native-ui-box [clickable]="true" [routerLink]="['support']" *ngIf="appConfig.platform === 'mobile'">
                <fhem-native-text-block class="w-100" [label]="'PAGES.SETTINGS.SUPPORT.MEMBER.TEXT' | translate" [info]="'PAGES.SETTINGS.SUPPORT.MEMBER.INFO' | translate"></fhem-native-text-block>
                <ion-icon class="color-a-app size-b-app" name="heart-outline"></ion-icon>
            </fhem-native-ui-box> -->

            <!-- documentation -->
            <fhem-native-ui-box [clickable]="true" (click)="openExternal('https://forum.fhem.de/index.php/board,102.0.html')">
                <fhem-native-text-block class="w-100" [label]="'PAGES.SETTINGS.SUPPORT.DOCS.TEXT' | translate" [info]="'PAGES.SETTINGS.SUPPORT.DOCS.INFO' | translate"></fhem-native-text-block>
                <ion-icon class="color-a-app size-b-app" name="chevron-forward-outline"></ion-icon>
            </fhem-native-ui-box>

            <!-- developer -->
            <fhem-native-ui-box [clickable]="true" class="mb-1-5" (click)="openExternal('https://fhemnative.de/docs/developer')">
                <fhem-native-text-block class="w-100" [label]="'PAGES.SETTINGS.SUPPORT.DEV.TEXT' | translate" [info]="'PAGES.SETTINGS.SUPPORT.DEV.INFO' | translate"></fhem-native-text-block>
                <ion-icon class="color-a-app size-b-app" name="chevron-forward-outline"></ion-icon>
            </fhem-native-ui-box>
        </div>
    </fhem-native-ui-category>

    <fhem-native-ui-category>
        <fhem-native-text-line name [wrap]="false"> {{'PAGES.SETTINGS.INFOS.HEAD' | translate}}</fhem-native-text-line>
        <div content>
            <!-- trademarks/markennutzung -->
            <fhem-native-ui-box [clickable]="true" (click)="showTrademarks = !showTrademarks">
                <fhem-native-text-block class="w-100" label="Hinweis zur Markennutzung"/>
                <ion-icon class="color-a-app size-b-app" name="eye-outline"></ion-icon>
            </fhem-native-ui-box>

            <!-- terms -->
            <fhem-native-ui-box [clickable]="true" (click)="showTerms = !showTerms">
                <fhem-native-text-block class="w-100" [label]="'PAGES.SETTINGS.INFOS.TERMS' | translate"/>
                <ion-icon class="color-a-app size-b-app" name="eye-outline"></ion-icon>
            </fhem-native-ui-box>
            
            <!-- web -->
            <fhem-native-ui-box [clickable]="true" (click)="openExternal('https://fhemnative.de')">
                <fhem-native-text-block class="w-100" [label]="'PAGES.SETTINGS.INFOS.WEB' | translate"/>
                <ion-icon class="color-a-app size-b-app" name="globe-outline"></ion-icon>
            </fhem-native-ui-box>

            <!-- data -->
            <fhem-native-ui-box [clickable]="true" (click)="openExternal('https://fhemnative.de/rights/datenschutz')">
                <fhem-native-text-block class="w-100" [label]="'PAGES.SETTINGS.INFOS.DATA' | translate"/>
                <ion-icon class="color-a-app size-b-app" name="globe-outline"></ion-icon>
            </fhem-native-ui-box>
        </div>
    </fhem-native-ui-category>

    <fhem-native-ui-category>
        <fhem-native-text-line name [wrap]="false"> {{'PAGES.SETTINGS.ADVANCED.HEAD' | translate}}</fhem-native-text-line>
        <div content>
            <!-- Version -->
            <fhem-native-ui-box>
                <fhem-native-text-block class="w-100" label="Version: "/>
                <fhem-native-text-line>{{currentVersion}}</fhem-native-text-line>
            </fhem-native-ui-box>
            
            <!-- advanced settings -->
            <fhem-native-ui-box [clickable]="true" [routerLink]="['advanced']">
                <fhem-native-text-block class="w-100" [label]="'PAGES.SETTINGS.ADVANCED.SETTINGS' | translate"/>
                <ion-icon class="color-a-app size-b-app" name="cog-outline"></ion-icon>
            </fhem-native-ui-box>
        </div>
    </fhem-native-ui-category>
</div>

<fhem-native-picker
    [(ngModel)]="showTerms"
    [height]="80"
    [width]="100"
    [headerAnimation]="false"
    [modalHeader]="('PAGES.RIGHTS.TERMS.HEAD_SHORT' | translate)">
    <fhem-native-rights-terms content/>
</fhem-native-picker>

<fhem-native-picker
    [(ngModel)]="showTrademarks"
    [height]="80"
    [width]="100"
    [headerAnimation]="false"
    modalHeader="Hinweis">
    <fhem-native-rights-usage content/>
</fhem-native-picker>